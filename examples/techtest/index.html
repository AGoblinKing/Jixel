<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width; initial-scale=1; maximum-scale=1; user-scalable=0;"/>
    <link href='http://fonts.googleapis.com/css?family=Geo' rel='stylesheet' type='text/css'/>
    <script type="text/javascript" src="../../jixel.js"></script>
    <script type="text/javascript" src="src/Cat.js"></script>
    <script type="text/javascript">
      var game, level, player, cloud, emitter;
      window.addEventListener('load', function(){
        var can = document.getElementById('target');
        Jxl.config({canvas:can, width: window.innerWidth, height: window.innerHeight});
        var am = Jxl.am;
        var assets = {
                      'images': {
                          'cloud': '../assets/cloud.png',
                          'animals': '../assets/animals.png',
                          'tiles': '../assets/tilemap.png'
                      }, 
                      'sounds': {
                          'hit': '../assets/hit.mp3',
                          'jump': '../assets/jump.wav',
                          'keyboard': '../assets/keyboard_cat_remix.mp3'
                      }
                    };
        am.load(assets, function() {
            var player = new Cat(am.get('animals'), 50, 0);
            //loadMap: function(MapData, TileGraphic, TileWidth, TileHeight) {
            var tiles = new Jxl.TileMap().loadMap("0,5,3,4,2,1,9,2", am.get('tiles'), 16, 16);
            Jxl.state.add(player);
            Jxl.state.add(tiles);
            Jxl.follow(player);
            Jxl.start();    
        });
      }, true);
    </script>
    <style type="text/css">
      body {
        background-repeat:repeat;
        background-color:#6ab5f8;
        margin:0px;
        padding:0px;
        overflow:hidden;
        font-family:'Geo';
      }
    </style>
  </head>
  <body>
    <canvas id="target"></canvas>
    <!--[if lte IE 9]>
    <script type="text/javascript" 
     src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script>

    <style>

     .chromeFrameInstallDefaultStyle {
       width: 100%; /* default is 800px */
       border: 5px solid blue;
     }
    </style>

    <div id="prompt">
    </div>
 
    <script>
     // The conditional ensures that this code will only execute in IE,
     // Therefore we can use the IE-specific attachEvent without worry
     $(function() {
       CFInstall.check({
         mode: "inline", // the default
         node: "prompt"
       });
     });
    </script>
    <![endif]-->
  </body>
</html>